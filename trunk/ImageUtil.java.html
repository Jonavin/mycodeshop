<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><TITLE>ImageUtil.java</TITLE>
<!--defaultCSS-->
<META name=GENERATOR content="MSHTML 9.00.8112.16441"></HEAD>
<BODY><CODE>
<DIV 
style="BORDER-BOTTOM: black 1px solid; TEXT-ALIGN: left; BORDER-LEFT: black 1px solid; PADDING-BOTTOM: 3px; BACKGROUND-COLOR: window; PADDING-LEFT: 3px; PADDING-RIGHT: 3px; FONT-FAMILY: Courier New; COLOR: black; MARGIN-LEFT: auto; FONT-SIZE: 12px; BORDER-TOP: black 1px solid; MARGIN-RIGHT: auto; BORDER-RIGHT: black 1px solid; PADDING-TOP: 3px"><FONT 
color=#0000ff><B>package</B></FONT> 
com.ztesoft.mobile.trunk.framework.common.util;&nbsp;<BR><BR><FONT 
color=#0000ff><B>import</B></FONT> java.io.BufferedOutputStream;<BR><FONT 
color=#0000ff><B>import</B></FONT> java.io.ByteArrayOutputStream;<BR><FONT 
color=#0000ff><B>import</B></FONT> java.io.File;<BR><FONT 
color=#0000ff><B>import</B></FONT> java.io.FileInputStream;<BR><FONT 
color=#0000ff><B>import</B></FONT> java.io.FileNotFoundException;<BR><FONT 
color=#0000ff><B>import</B></FONT> java.io.FileOutputStream;<BR><FONT 
color=#0000ff><B>import</B></FONT> java.io.IOException;<BR><FONT 
color=#0000ff><B>import</B></FONT> java.io.InputStream;<BR><FONT 
color=#0000ff><B>import</B></FONT> java.io.ObjectOutputStream;<BR><FONT 
color=#0000ff><B>import</B></FONT> java.net.HttpURLConnection;<BR><FONT 
color=#0000ff><B>import</B></FONT> java.net.MalformedURLException;<BR><FONT 
color=#0000ff><B>import</B></FONT> java.net.URL;<BR><BR><FONT 
color=#0000ff><B>import</B></FONT> android.content.Context;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.graphics.Bitmap;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.graphics.BitmapFactory;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.graphics.Canvas;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.graphics.LinearGradient;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.graphics.Matrix;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.graphics.Paint;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.graphics.PixelFormat;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.graphics.PorterDuffXfermode;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.graphics.Rect;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.graphics.RectF;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.graphics.Bitmap.Config;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.graphics.PorterDuff.Mode;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.graphics.Shader.TileMode;<BR><FONT 
color=#0000ff><B>import</B></FONT> 
android.graphics.drawable.BitmapDrawable;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.graphics.drawable.Drawable;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.util.Log;<BR><FONT 
color=#0000ff><B>import</B></FONT> android.view.View;<BR><BR><FONT 
color=#0000ff><B>public</B></FONT> <FONT color=#0000ff><B>class</B></FONT> 
ImageUtil {<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>private</B></FONT> <FONT color=#0000ff><B>static</B></FONT> 
String tag <FONT color=#333399>=</FONT> <FONT 
color=#ff00bf>"ImageUtil"</FONT>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>private</B></FONT> String 
loderpath;<BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff><B>private</B></FONT> 
Bitmap image;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>/**<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 图片Url保存为位图并进行缩放操作 
通过传入图片url获取位图方法<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>static</B></FONT> <FONT color=#0000ff><B>public</B></FONT> 
Bitmap returnBitMap(String url) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;URL myFileUrl <FONT 
color=#333399>=</FONT> 
null;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bitmap bitmap <FONT 
color=#333399>=</FONT> 
null;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>try</B></FONT> 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myFileUrl 
<FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
URL(url);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT 
color=#0000ff><B>catch</B></FONT> (MalformedURLException e) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>try</B></FONT> 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpURLConnection 
conn <FONT color=#333399>=</FONT> (HttpURLConnection) 
myFileUrl<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.openConnection();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn.setDoInput(true);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn.connect();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream 
is <FONT color=#333399>=</FONT> 
conn.getInputStream();<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bitmap 
<FONT color=#333399>=</FONT> 
BitmapFactory.decodeStream(is);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is.close();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
<FONT color=#0000ff><B>catch</B></FONT> (IOException e) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR><FONT 
color=#008000>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.v("ImageLoader", 
bitmap.toString());</FONT><BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>return</B></FONT> 
bitmap;<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>/**<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 缩放！ 
通过传入位图,新的宽.高比进行位图的缩放操作<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>public</B></FONT> <FONT color=#0000ff><B>static</B></FONT> 
Drawable resizeImage(Bitmap bitmap, <FONT color=#0000ff><B>int</B></FONT> w, 
<FONT color=#0000ff><B>int</B></FONT> h) 
{<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#008000>// 
load the origial 
Bitmap</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bitmap 
BitmapOrg <FONT color=#333399>=</FONT> 
bitmap;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> width <FONT color=#333399>=</FONT> 
BitmapOrg.getWidth();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> height <FONT color=#333399>=</FONT> 
BitmapOrg.getHeight();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> newWidth <FONT color=#333399>=</FONT> 
w;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> newHeight <FONT color=#333399>=</FONT> 
h;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.v(tag, 
String.valueOf(width));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.v(tag, 
String.valueOf(height));<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.v(tag, 
String.valueOf(newWidth));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.v(tag, 
String.valueOf(newHeight));<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// calculate the 
scale</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>float</B></FONT> scaleWidth <FONT color=#333399>=</FONT> 
((<FONT color=#0000ff><B>float</B></FONT>) newWidth) <FONT 
color=#333399>/</FONT> 
width;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>float</B></FONT> scaleHeight <FONT color=#333399>=</FONT> 
((<FONT color=#0000ff><B>float</B></FONT>) newHeight) <FONT 
color=#333399>/</FONT> 
height;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// create a matrix for the 
manipulation</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Matrix 
matrix <FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
Matrix();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// resize the 
Bitmap</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matrix.postScale(scaleWidth, 
scaleHeight);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// if you want to rotate the 
Bitmap</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// 
matrix.postRotate(45);</FONT><BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// recreate the new 
Bitmap</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bitmap 
resizedBitmap <FONT color=#333399>=</FONT> Bitmap.createBitmap(BitmapOrg, <FONT 
color=#6e00aa>0</FONT>, <FONT color=#6e00aa>0</FONT>, 
width,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height, 
matrix, true);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// make a Drawable from Bitmap to allow to set the 
Bitmap</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// to the ImageView, ImageButton or what 
ever</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>return</B></FONT> <FONT color=#0000ff><B>new</B></FONT> 
BitmapDrawable(resizedBitmap);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>/**<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
将Drawable转化为Bitmap<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>public</B></FONT> <FONT color=#0000ff><B>static</B></FONT> 
Bitmap drawableToBitmap(Drawable drawable) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> width <FONT color=#333399>=</FONT> 
drawable.getIntrinsicWidth();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> height <FONT color=#333399>=</FONT> 
drawable.getIntrinsicHeight();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bitmap 
bitmap <FONT color=#333399>=</FONT> Bitmap.createBitmap(width, height, 
drawable<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.getOpacity() 
<FONT color=#333399>!=</FONT> PixelFormat.OPAQUE <FONT color=#333399>?</FONT> 
Bitmap.Config.ARGB_8888<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#333399>:</FONT> 
Bitmap.Config.RGB_565);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Canvas 
canvas <FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
Canvas(bitmap);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawable.setBounds(<FONT 
color=#6e00aa>0</FONT>, <FONT color=#6e00aa>0</FONT>, width, 
height);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawable.draw(canvas);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>return</B></FONT> 
bitmap;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>/***<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
加载本地图片<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
@param context<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
：主运行函数实例<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param 
bitAdress<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
：图片地址，一般指向R下的drawable目录<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
@return<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>static</B></FONT> <FONT color=#0000ff><B>public</B></FONT> 
<FONT color=#0000ff><B>final</B></FONT> Bitmap CreatImage(Context context, <FONT 
color=#0000ff><B>int</B></FONT> bitAdress) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BitmapFactory.Options opt 
<FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
BitmapFactory.Options();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;opt.inPreferredConfig 
<FONT color=#333399>=</FONT> 
Bitmap.Config.RGB_565;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;opt.inPurgeable 
<FONT color=#333399>=</FONT> 
true;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;opt.inInputShareable 
<FONT color=#333399>=</FONT> 
true;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#008000>// 
获取资源图片</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream is 
<FONT color=#333399>=</FONT> 
context.getResources().openRawResource(bitAdress);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>return</B></FONT> BitmapFactory.decodeStream(is, null, 
opt);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// Bitmap bitmaptemp = 
null;</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// bitmaptemp = 
BitmapFactory.decodeResource(context.getResources(),</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// 
bitAdress);</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// return 
bitmaptemp;</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>/***<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
图片的缩放方法<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
@param bgimage<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
：源图片资源<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param 
newWidth<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
：缩放后宽度<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param 
newHeight<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
：缩放后高度<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
@return<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>static</B></FONT> <FONT color=#0000ff><B>public</B></FONT> 
Bitmap zoomImage(Bitmap bgimage, <FONT color=#0000ff><B>int</B></FONT> newWidth, 
<FONT color=#0000ff><B>int</B></FONT> newHeight) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#008000>// 
获取这个图片的宽和高</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> width <FONT color=#333399>=</FONT> 
bgimage.getWidth();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> height <FONT color=#333399>=</FONT> 
bgimage.getHeight();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// 
创建操作图片用的matrix对象</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Matrix 
matrix <FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
Matrix();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// 
计算缩放率，新尺寸除原始尺寸</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>float</B></FONT> scaleWidth <FONT color=#333399>=</FONT> 
((<FONT color=#0000ff><B>float</B></FONT>) newWidth) <FONT 
color=#333399>/</FONT> 
width;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>float</B></FONT> scaleHeight <FONT color=#333399>=</FONT> 
((<FONT color=#0000ff><B>float</B></FONT>) newHeight) <FONT 
color=#333399>/</FONT> 
height;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// 
缩放图片动作</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matrix.postScale(scaleWidth, 
scaleHeight);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bitmap bitmap 
<FONT color=#333399>=</FONT> Bitmap.createBitmap(bgimage, <FONT 
color=#6e00aa>0</FONT>, <FONT color=#6e00aa>0</FONT>, width, 
height,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matrix, 
true);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>return</B></FONT> 
bitmap;<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>/***<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
绘制带有边框的文字<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
@param strMsg<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
：绘制内容<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param 
g<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* ：画布<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
@param paint<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
：画笔<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param 
setx<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
：：X轴起始坐标<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param 
sety<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
：Y轴的起始坐标<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param 
fg<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* ：前景色<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
@param bg<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
：背景色<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>static</B></FONT> <FONT color=#0000ff><B>public</B></FONT> 
<FONT color=#0000ff><B>void</B></FONT> drawText(String strMsg, Canvas g, Paint 
paint, <FONT color=#0000ff><B>int</B></FONT> 
setx,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> sety, <FONT color=#0000ff><B>int</B></FONT> fg, 
<FONT color=#0000ff><B>int</B></FONT> bg) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paint.setColor(bg);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.drawText(strMsg, 
setx <FONT color=#333399>+</FONT> <FONT color=#6e00aa>1</FONT>, sety, 
paint);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.drawText(strMsg, 
setx, sety <FONT color=#333399>-</FONT> <FONT color=#6e00aa>1</FONT>, 
paint);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.drawText(strMsg, 
setx, sety <FONT color=#333399>+</FONT> <FONT color=#6e00aa>1</FONT>, 
paint);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.drawText(strMsg, 
setx <FONT color=#333399>-</FONT> <FONT color=#6e00aa>1</FONT>, sety, 
paint);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paint.setColor(fg);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.drawText(strMsg, 
setx, sety, 
paint);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.restore();<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>/**<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
图片透明度处理<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
@param sourceImg<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
原始图片<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param 
number<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 透明度<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
@return<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>public</B></FONT> <FONT color=#0000ff><B>static</B></FONT> 
Bitmap setAlpha(Bitmap sourceImg, <FONT color=#0000ff><B>int</B></FONT> number) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT>[] argb <FONT color=#333399>=</FONT> <FONT 
color=#0000ff><B>new</B></FONT> <FONT 
color=#0000ff><B>int</B></FONT>[sourceImg.getWidth() <FONT 
color=#333399>*</FONT> 
sourceImg.getHeight()];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceImg.getPixels(argb, 
<FONT color=#6e00aa>0</FONT>, sourceImg.getWidth(), <FONT 
color=#6e00aa>0</FONT>, <FONT color=#6e00aa>0</FONT>, 
sourceImg<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.getWidth(), 
sourceImg.getHeight());<FONT color=#008000>// 
获得图片的ARGB值</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number 
<FONT color=#333399>=</FONT> number <FONT color=#333399>*</FONT> <FONT 
color=#6e00aa>255</FONT> <FONT color=#333399>/</FONT> <FONT 
color=#6e00aa>100</FONT>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>for</B></FONT> (<FONT color=#0000ff><B>int</B></FONT> i <FONT 
color=#333399>=</FONT> <FONT color=#6e00aa>0</FONT>; i <FONT 
color=#333399>&lt;</FONT> argb.length; i<FONT color=#333399>++</FONT>) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argb[i] 
<FONT color=#333399>=</FONT> (number <FONT color=#333399>&lt;&lt;</FONT> <FONT 
color=#6e00aa>24</FONT>) <FONT color=#333399>|</FONT> (argb[i] <FONT 
color=#333399>&amp;</FONT> 0X00FFFFFF);<FONT color=#008000>// 
修改最高2位的值</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceImg 
<FONT color=#333399>=</FONT> Bitmap.createBitmap(argb, sourceImg.getWidth(), 
sourceImg<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.getHeight(), 
Config.ARGB_8888);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>return</B></FONT> 
sourceImg;<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>/**<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
获得圆角图片的方法<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>public</B></FONT> <FONT color=#0000ff><B>static</B></FONT> 
Bitmap getRoundedCornerBitmap(Bitmap bitmap, <FONT 
color=#0000ff><B>float</B></FONT> roundPx) 
{<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bitmap output <FONT 
color=#333399>=</FONT> Bitmap.createBitmap(bitmap.getWidth(), 
bitmap<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.getHeight(), 
Config.ARGB_8888);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Canvas 
canvas <FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
Canvas(output);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>final</B></FONT> <FONT color=#0000ff><B>int</B></FONT> color 
<FONT color=#333399>=</FONT> 
0xff424242;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>final</B></FONT> Paint paint <FONT color=#333399>=</FONT> <FONT 
color=#0000ff><B>new</B></FONT> 
Paint();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>final</B></FONT> Rect rect <FONT color=#333399>=</FONT> <FONT 
color=#0000ff><B>new</B></FONT> Rect(<FONT color=#6e00aa>0</FONT>, <FONT 
color=#6e00aa>0</FONT>, bitmap.getWidth(), 
bitmap.getHeight());<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>final</B></FONT> RectF rectF <FONT color=#333399>=</FONT> <FONT 
color=#0000ff><B>new</B></FONT> 
RectF(rect);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paint.setAntiAlias(true);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas.drawARGB(<FONT 
color=#6e00aa>0</FONT>, <FONT color=#6e00aa>0</FONT>, <FONT 
color=#6e00aa>0</FONT>, <FONT 
color=#6e00aa>0</FONT>);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paint.setColor(color);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas.drawRoundRect(rectF, 
roundPx, roundPx, 
paint);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paint.setXfermode(<FONT 
color=#0000ff><B>new</B></FONT> 
PorterDuffXfermode(Mode.SRC_IN));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas.drawBitmap(bitmap, 
rect, rect, paint);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>return</B></FONT> 
output;<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>/**<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
获得带倒影的图片方法<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>public</B></FONT> <FONT color=#0000ff><B>static</B></FONT> 
Bitmap createReflectionImageWithOrigin(Bitmap bitmap) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>final</B></FONT> <FONT color=#0000ff><B>int</B></FONT> 
reflectionGap <FONT color=#333399>=</FONT> <FONT 
color=#6e00aa>4</FONT>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> width <FONT color=#333399>=</FONT> 
bitmap.getWidth();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> height <FONT color=#333399>=</FONT> 
bitmap.getHeight();<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Matrix 
matrix <FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
Matrix();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matrix.preScale(<FONT 
color=#6e00aa>1</FONT>, <FONT color=#333399>-</FONT><FONT 
color=#6e00aa>1</FONT>);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bitmap 
reflectionImage <FONT color=#333399>=</FONT> Bitmap.createBitmap(bitmap, <FONT 
color=#6e00aa>0</FONT>, height <FONT color=#333399>/</FONT> <FONT 
color=#6e00aa>2</FONT>,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width, 
height <FONT color=#333399>/</FONT> <FONT color=#6e00aa>2</FONT>, matrix, 
false);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bitmap 
bitmapWithReflection <FONT color=#333399>=</FONT> 
Bitmap.createBitmap(width,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(height 
<FONT color=#333399>+</FONT> height <FONT color=#333399>/</FONT> <FONT 
color=#6e00aa>2</FONT>), 
Config.ARGB_8888);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Canvas 
canvas <FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
Canvas(bitmapWithReflection);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas.drawBitmap(bitmap, 
<FONT color=#6e00aa>0</FONT>, <FONT color=#6e00aa>0</FONT>, 
null);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Paint deafalutPaint 
<FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
Paint();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.drawRect(<FONT 
color=#6e00aa>0</FONT>, height, width, height <FONT color=#333399>+</FONT> 
reflectionGap,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deafalutPaint);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas.drawBitmap(reflectionImage, 
<FONT color=#6e00aa>0</FONT>, height <FONT color=#333399>+</FONT> reflectionGap, 
null);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Paint paint <FONT 
color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
Paint();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LinearGradient 
shader <FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
LinearGradient(<FONT color=#6e00aa>0</FONT>, bitmap.getHeight(), <FONT 
color=#6e00aa>0</FONT>,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bitmapWithReflection.getHeight() 
<FONT color=#333399>+</FONT> reflectionGap, 
0x70ffffff,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x00ffffff, 
TileMode.CLAMP);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paint.setShader(shader);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// Set the Transfer mode to be porter duff and destination 
in</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;paint.setXfermode(<FONT 
color=#0000ff><B>new</B></FONT> 
PorterDuffXfermode(Mode.DST_IN));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// Draw a rectangle using the paint with our linear 
gradient</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas.drawRect(<FONT 
color=#6e00aa>0</FONT>, height, width, 
bitmapWithReflection.getHeight()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#333399>+</FONT> reflectionGap, 
paint);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>return</B></FONT> 
bitmapWithReflection;<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>/**<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
重新编码Bitmap<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
@param src<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
需要重新编码的Bitmap<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
@param format<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
编码后的格式（目前只支持png和jpeg这两种格式）<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
@param quality<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
重新生成后的bitmap的质量<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
@return 
返回重新生成后的bitmap<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>private</B></FONT> <FONT color=#0000ff><B>static</B></FONT> 
Bitmap codec(Bitmap src, Bitmap.CompressFormat 
format,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> quality) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ByteArrayOutputStream os 
<FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
ByteArrayOutputStream();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;src.compress(format, 
quality, os);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>byte</B></FONT>[] array <FONT color=#333399>=</FONT> 
os.toByteArray();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>return</B></FONT> BitmapFactory.decodeByteArray(array, <FONT 
color=#6e00aa>0</FONT>, 
array.length);<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// Stream转换成Byte</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>static</B></FONT> <FONT color=#0000ff><B>byte</B></FONT>[] 
streamToBytes(InputStream is) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ByteArrayOutputStream os 
<FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
ByteArrayOutputStream(<FONT 
color=#6e00aa>1024</FONT>);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>byte</B></FONT>[] buffer <FONT color=#333399>=</FONT> <FONT 
color=#0000ff><B>new</B></FONT> <FONT color=#0000ff><B>byte</B></FONT>[<FONT 
color=#6e00aa>1024</FONT>];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> 
len;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>try</B></FONT> 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>while</B></FONT> ((len <FONT color=#333399>=</FONT> 
is.read(buffer)) <FONT color=#333399>&gt;</FONT><FONT color=#333399>=</FONT> 
<FONT color=#6e00aa>0</FONT>) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os.write(buffer, 
<FONT color=#6e00aa>0</FONT>, 
len);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
<FONT color=#0000ff><B>catch</B></FONT> (java.io.IOException e) 
{<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>return</B></FONT> 
os.toByteArray();<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>/**<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
把一个View的对象转换成bitmap<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>public</B></FONT> <FONT color=#0000ff><B>static</B></FONT> 
Bitmap getViewBitmap(View v) 
{<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.clearFocus();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.setPressed(false);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// 
能画缓存就返回false</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>boolean</B></FONT> willNotCache <FONT color=#333399>=</FONT> 
v.willNotCacheDrawing();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.setWillNotCacheDrawing(false);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> color <FONT color=#333399>=</FONT> 
v.getDrawingCacheBackgroundColor();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.setDrawingCacheBackgroundColor(<FONT 
color=#6e00aa>0</FONT>);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>if</B></FONT> (color <FONT color=#333399>!=</FONT> <FONT 
color=#6e00aa>0</FONT>) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.destroyDrawingCache();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.buildDrawingCache();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bitmap 
cacheBitmap <FONT color=#333399>=</FONT> 
v.getDrawingCache();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>if</B></FONT> (cacheBitmap <FONT color=#333399>==</FONT> null) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.e(tag, 
<FONT color=#ff00bf>"failed getViewBitmap("</FONT> <FONT color=#333399>+</FONT> 
v <FONT color=#333399>+</FONT> <FONT 
color=#ff00bf>")"</FONT>,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>new</B></FONT> 
RuntimeException());<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>return</B></FONT> 
null;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bitmap 
bitmap <FONT color=#333399>=</FONT> 
Bitmap.createBitmap(cacheBitmap);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// Restore the 
view</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.destroyDrawingCache();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.setWillNotCacheDrawing(willNotCache);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.setDrawingCacheBackgroundColor(color);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>return</B></FONT> 
bitmap;<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>/**<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
以字节为单位读取文件，常用于读二进制文件，如图片、声音、影像等文件。<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
@param fileName<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
文件的名<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>public</B></FONT> <FONT color=#0000ff><B>static</B></FONT> 
<FONT color=#0000ff><B>void</B></FONT> readFileByBytes(String fileName) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File file <FONT 
color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
File(fileName);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream 
in <FONT color=#333399>=</FONT> 
null;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>try</B></FONT> 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<FONT 
color=#ff00bf>"以字节为单位读取文件内容，一次读一个字节："</FONT>);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// 
一次读一个字节</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in 
<FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
FileInputStream(file);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> 
tempbyte;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>while</B></FONT> ((tempbyte <FONT color=#333399>=</FONT> 
in.read()) <FONT color=#333399>!=</FONT> <FONT color=#333399>-</FONT><FONT 
color=#6e00aa>1</FONT>) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.write(tempbyte);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.close();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
<FONT color=#0000ff><B>catch</B></FONT> (IOException e) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>return</B></FONT>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>try</B></FONT> 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<FONT 
color=#ff00bf>"以字节为单位读取文件内容，一次读多个字节："</FONT>);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// 
一次读多个字节</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>byte</B></FONT>[] tempbytes <FONT color=#333399>=</FONT> <FONT 
color=#0000ff><B>new</B></FONT> <FONT color=#0000ff><B>byte</B></FONT>[<FONT 
color=#6e00aa>100</FONT>];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>int</B></FONT> byteread <FONT color=#333399>=</FONT> <FONT 
color=#6e00aa>0</FONT>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in 
<FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
FileInputStream(fileName);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// 
ReadFromFile.showAvailableBytes(in);</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// 
读入多个字节到字节数组中，byteread为一次读入的字节数</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>while</B></FONT> ((byteread <FONT color=#333399>=</FONT> 
in.read(tempbytes)) <FONT color=#333399>!=</FONT> <FONT 
color=#333399>-</FONT><FONT color=#6e00aa>1</FONT>) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.write(tempbytes, 
<FONT color=#6e00aa>0</FONT>, 
byteread);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
<FONT color=#0000ff><B>catch</B></FONT> (Exception e1) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
<FONT color=#0000ff><B>finally</B></FONT> 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>if</B></FONT> (in <FONT color=#333399>!=</FONT> null) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>try</B></FONT> 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.close();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
<FONT color=#0000ff><B>catch</B></FONT> (IOException e1) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>/**<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 
把本地对象数据重新保存到本地<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param 
path<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param 
info<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>public</B></FONT> <FONT color=#0000ff><B>static</B></FONT> 
<FONT color=#0000ff><B>void</B></FONT> saveLocationInfo(Object info,String 
picLocPath,String name) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String path <FONT 
color=#333399>=</FONT> picLocPath<FONT color=#333399>+</FONT>File.separator<FONT 
color=#333399>+</FONT>name;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>if</B></FONT>(<FONT color=#0000ff><B>new</B></FONT> 
File(picLocPath).mkdirs())<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File 
picInfo <FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
File(path);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>if</B></FONT>(<FONT 
color=#333399>!</FONT>picInfo.exists())<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>try</B></FONT> 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;picInfo.createNewFile();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
<FONT color=#0000ff><B>catch</B></FONT> (IOException e1) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ObjectOutputStream 
out <FONT color=#333399>=</FONT> 
null;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>try</B></FONT> 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out 
<FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
ObjectOutputStream(<FONT color=#0000ff><B>new</B></FONT> 
BufferedOutputStream(<FONT color=#0000ff><B>new</B></FONT> 
FileOutputStream(picInfo)));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out.writeObject(info);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
<FONT color=#0000ff><B>catch</B></FONT> (FileNotFoundException e) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// TODO Auto-generated catch 
block</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
<FONT color=#0000ff><B>catch</B></FONT> (IOException e) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// TODO Auto-generated catch 
block</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<FONT 
color=#0000ff><B>finally</B></FONT>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>if</B></FONT>(out <FONT 
color=#333399>!=</FONT>null)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>try</B></FONT> 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out.close();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
<FONT color=#0000ff><B>catch</B></FONT> (IOException e) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#008000>// TODO Auto-generated catch 
block</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>public</B></FONT> <FONT color=#0000ff><B>static</B></FONT> 
<FONT color=#0000ff><B>void</B></FONT> saveMyBitmap(Bitmap mBitmap,String 
picLocPath,String name) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>if</B></FONT>(mBitmap <FONT color=#333399>==</FONT> null <FONT 
color=#333399>||</FONT> picLocPath <FONT color=#333399>==</FONT>null 
)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>return</B></FONT> 
;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String path <FONT 
color=#333399>=</FONT> 
picLocPath;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>if</B></FONT>(null <FONT color=#333399>!=</FONT> name 
)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path<FONT 
color=#333399>+=</FONT>File.separator<FONT 
color=#333399>+</FONT>name;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>if</B></FONT>(<FONT color=#0000ff><B>new</B></FONT> 
File(picLocPath).mkdirs())<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File 
f <FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
File(path);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>if</B></FONT>(<FONT 
color=#333399>!</FONT>f.exists())<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>try</B></FONT> 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.createNewFile();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
<FONT color=#0000ff><B>catch</B></FONT> (IOException e1) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileOutputStream 
fOut <FONT color=#333399>=</FONT> 
null;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>try</B></FONT> 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fOut 
<FONT color=#333399>=</FONT> <FONT color=#0000ff><B>new</B></FONT> 
FileOutputStream(f);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT 
color=#0000ff><B>catch</B></FONT> (FileNotFoundException e) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>if</B></FONT>(fOut<FONT 
color=#333399>==</FONT>null)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>return</B></FONT> 
;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mBitmap.compress(Bitmap.CompressFormat.PNG, 
<FONT color=#6e00aa>100</FONT>, 
fOut);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>try</B></FONT> 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fOut.flush();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
<FONT color=#0000ff><B>catch</B></FONT> (IOException e) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT 
color=#0000ff><B>try</B></FONT> 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fOut.close();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
<FONT color=#0000ff><B>catch</B></FONT> (IOException e) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>}<BR>}</DIV></CODE></BODY></HTML>
